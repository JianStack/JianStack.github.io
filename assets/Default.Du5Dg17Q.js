import{p as I,b as n,d as L,N as q,O as l,a3 as C,P as u,R as v,S as a,V as r,F as D,W as o,a2 as V,L as B,C as F}from"./framework.CGpsDzRo.js";const P={key:0,class:"notice-bar"},$={class:"notice-content"},E={key:0},b={key:1},R={class:"city"},T={class:"greeting"},j={class:"distance"},A={class:"distance"},K={class:"ip"},O=I({__name:"NoticeBar",setup(x){const d=n(""),f=n(""),g=n(""),h=n(""),m=n(""),y=n(!0),_=n(""),M=n(!0),k=async s=>{const e=await(await fetch(`https://wcode.net/api/ip/v3/info/free?ip=${s}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer sk-773.5kUNDp8IGDOE9wEK1WOAPe32fN9aLln7eeeYVgHktvVTdweI"}})).json();return e.status==="success"&&e.data.extra_info.latitude&&e.data.extra_info.longitude?{lat:parseFloat(e.data.extra_info.latitude),lng:parseFloat(e.data.extra_info.longitude)}:(console.error("Failed to get city coordinates:",e),{lat:0,lng:0})};L(async()=>{try{const t=await(await fetch("https://ipapi.co/json")).json();d.value=t.ip,f.value=`${t.country_name} ${t.region} ${t.city}`||"未知地区";const i=await k(t.ip);if(i.lat===0&&i.lng===0)throw new Error("无法获取有效的经纬度信息");const e={lat:113.047264,lng:34.765588};g.value=w(e,i).toFixed(2);const p={lat:113.047264,lng:34.765588};h.value=w(p,i).toFixed(2);const c=new Date().getHours();m.value=c<12?"早上好，美好的一天又开始了😎":c<18?"下午好，累了就好好休息一下吧🎶":"晚上好，在属于自己的时间里好好放松吧😶‍🌫️"}catch(s){_.value="无法加载公告信息，请稍后重试。刷新后如果问题仍然存在，请通过2521896282@qq.com联系我",console.error("Error:",s)}finally{y.value=!1}});function w(s,t){const e=(t.lat-s.lat)*Math.PI/180,p=(t.lng-s.lng)*Math.PI/180,c=Math.sin(e/2)*Math.sin(e/2)+Math.cos(s.lat*Math.PI/180)*Math.cos(t.lat*Math.PI/180)*Math.sin(p/2)*Math.sin(p/2);return 6371*(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)))}function N(){M.value=!1}return(s,t)=>(l(),q(V,{name:"slide"},{default:C(()=>[M.value?(l(),u("div",P,[a("div",$,[a("button",{class:"close-button",onClick:N},"×"),t[8]||(t[8]=a("h3",null,"公告",-1)),y.value?(l(),u("p",E,"加载中...")):_.value?(l(),u("p",b,r(_.value),1)):(l(),u(D,{key:2},[t[6]||(t[6]=a("p",null,[o("欢迎来到JiAn的博客！有任何问题请联系邮箱: "),a("a",{href:"mailto:2521896282@qq.com"},"2521896282@qq.com")],-1)),t[7]||(t[7]=a("p",null,"🎉 欢迎信息 🎉",-1)),a("p",null,[t[0]||(t[0]=o("  欢迎来自 ",-1)),a("span",R,r(f.value),1),t[1]||(t[1]=o(" 的小伙伴，",-1)),a("span",T,r(m.value),1),t[2]||(t[2]=o("！您现在距离站长约 ",-1)),a("span",j,r(g.value),1),t[3]||(t[3]=o(" 公里，距离博客服务器约 ",-1)),a("span",A,r(h.value),1),t[4]||(t[4]=o(" 公里。当前的IP地址为： ",-1)),a("span",K,r(d.value),1),t[5]||(t[5]=o("，祝您在我的博客里玩的开心！",-1))])],64))])])):v("v-if",!0)]),_:1}))}}),G=B(O,[["__scopeId","data-v-436c26f8"]]),H={class:"app"},z={__name:"Default",setup(x){return(d,f)=>(l(),u("div",H,[v(" 其他内容（如导航栏、主内容） "),F(G),v(" 添加公告栏组件 ")]))}};export{z as default};
