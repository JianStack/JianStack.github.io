import{_ as g}from"./ValaxyMain.vue_vue_type_style_index_0_lang.Dl6f09j6.js";import{e as c,a as E,u as m}from"./chunks/vue-router.OX6wyTgk.js";import{N as y,a3 as s,U as n,S as l,W as i,u as A,O as b,E as f}from"./framework.CGpsDzRo.js";import"./app.JH9xSBGv.js";import"./chunks/dayjs.CCYrSalk.js";import"./chunks/@vueuse/motion.Cj-llAHY.js";import"./chunks/vue-i18n.BIKvsUT3.js";import"./chunks/pinia.DIgot8h-.js";import"./chunks/nprogress.BahbDzmd.js";import"./YunComment.vue_vue_type_style_index_0_lang.GypxAZnc.js";import"./index.C5okkQwF.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang.DnrUgoOv.js";import"./post.CQKmAQPh.js";const v=c("/posts/AOP",async e=>JSON.parse('{"title":"深入理解AOP：面向切面编程的核心与实践","description":"","frontmatter":{"title":"深入理解AOP：面向切面编程的核心与实践","date":"2025-05-20","updated":"2025-05-20","categories":"笔记","tags":["笔记","AOP"],"top":2},"headers":[],"relativePath":"pages/posts/AOP.md","lastUpdated":1755313729000}'),{lazy:(e,r)=>e.name===r.name}),N={__name:"AOP",setup(e,{expose:r}){var k;const{data:h}=v(),p=m(),o=E(),t=Object.assign(o.meta.frontmatter||{},((k=h.value)==null?void 0:k.frontmatter)||{});return o.meta.frontmatter=t,p.currentRoute.value.data=h.value,f("valaxy:frontmatter",t),globalThis.$frontmatter=t,r({frontmatter:{title:"深入理解AOP：面向切面编程的核心与实践",date:"2025-05-20",updated:"2025-05-20",categories:"笔记",tags:["笔记","AOP"],top:2}}),(a,u)=>{const d=g;return b(),y(d,{frontmatter:A(t)},{"main-content-md":s(()=>u[0]||(u[0]=[l("h2",{id:"什么是aop",tabindex:"-1"},[i("什么是AOP？ "),l("a",{class:"header-anchor",href:"#什么是aop","aria-label":'Permalink to "什么是AOP？"'},"​")],-1),l("p",null,[i("AOP（Aspect Oriented Programming）即"),l("strong",null,"面向切面编程"),i("，是一种编程范式，允许开发者将"),l("strong",null,"横切关注点"),i("（如日志、事务、性能监控）从核心业务逻辑中分离，实现代码的高效复用和解耦。")],-1),l("h3",{id:"典型应用场景",tabindex:"-1"},[i("典型应用场景 "),l("a",{class:"header-anchor",href:"#典型应用场景","aria-label":'Permalink to "典型应用场景"'},"​")],-1),l("ul",null,[l("li",null,[l("strong",null,"性能监控"),i("：统计方法执行耗时")]),l("li",null,[l("strong",null,"日志记录"),i("：统一记录接口调用信息")]),l("li",null,[l("strong",null,"事务管理"),i("：自动开启/提交事务")]),l("li",null,[l("strong",null,"权限校验"),i("：拦截未授权请求")])],-1),l("h3",{id:"aop的四大优势",tabindex:"-1"},[i("AOP的四大优势 "),l("a",{class:"header-anchor",href:"#aop的四大优势","aria-label":'Permalink to "AOP的四大优势"'},"​")],-1),l("ol",null,[l("li",null,[l("strong",null,"减少重复代码"),i("：将通用逻辑集中处理")]),l("li",null,[l("strong",null,"无侵入性"),i("：不修改原始业务代码")]),l("li",null,[l("strong",null,"提升开发效率"),i("：聚焦核心功能开发")]),l("li",null,[l("strong",null,"易于维护"),i("：功能变更只需修改切面")])],-1),l("h3",{id:"aop核心概念解析",tabindex:"-1"},[i("AOP核心概念解析 "),l("a",{class:"header-anchor",href:"#aop核心概念解析","aria-label":'Permalink to "AOP核心概念解析"'},"​")],-1),l("table",null,[l("thead",null,[l("tr",null,[l("th",null,[l("strong",null,"概念")]),l("th",null,[l("strong",null,"说明")])])]),l("tbody",null,[l("tr",null,[l("td",null,[l("strong",null,"连接点")]),l("td",null,"程序执行中的特定点（如方法调用），包含执行上下文信息")]),l("tr",null,[l("td",null,[l("strong",null,"通知")]),l("td",null,"封装横切逻辑的方法（如记录耗时）")]),l("tr",null,[l("td",null,[l("strong",null,"切入点")]),l("td",null,"定义哪些连接点会触发通知（通过表达式匹配）")]),l("tr",null,[l("td",null,[l("strong",null,"切面")]),l("td",null,'通知 + 切入点的结合体，描述"何时何地做什么"')]),l("tr",null,[l("td",null,[l("strong",null,"目标对象")]),l("td",null,"被代理的原始对象（如Service实例）")])])],-1),l("h3",{id:"aop通知类型详解",tabindex:"-1"},[i("AOP通知类型详解 "),l("a",{class:"header-anchor",href:"#aop通知类型详解","aria-label":'Permalink to "AOP通知类型详解"'},"​")],-1),l("h4",{id:"五类通知的执行时机",tabindex:"-1"},[i("五类通知的执行时机 "),l("a",{class:"header-anchor",href:"#五类通知的执行时机","aria-label":'Permalink to "五类通知的执行时机"'},"​")],-1),l("ol",null,[l("li",null,[l("p",null,[l("strong",null,"@Around")]),l("ul",null,[l("li",null,"包裹目标方法，手动控制方法执行"),l("li",null,[i("必须返回"),l("code",null,"Object"),i("，接收原始方法返回值")])]),l("div",{class:"language-java vp-adaptive-theme"},[l("button",{title:"Copy Code",class:"copy"}),l("span",{class:"lang"},"java"),l("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"@"),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Around"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"pt()"'),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")  ")]),i(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"public"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," Object "),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"around"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(ProceedingJoinPoint pjp) throws Throwable {  ")]),i(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    // 前置逻辑  ")]),i(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Object result "),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," pjp."),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"proceed"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();  ")]),i(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    // 后置逻辑  ")]),i(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    return"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," result;  ")]),i(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),l("button",{class:"collapse"})])]),l("li",null,[l("p",null,[l("strong",null,"@Before")]),l("ul",null,[l("li",null,[i("目标方法执行"),l("strong",null,"前"),i("触发")])])]),l("li",null,[l("p",null,[l("strong",null,"@After")]),l("ul",null,[l("li",null,[i("目标方法执行"),l("strong",null,"后"),i("触发（无论是否异常）")])])]),l("li",null,[l("p",null,[l("strong",null,"@AfterReturning")]),l("ul",null,[l("li",null,[i("目标方法"),l("strong",null,"正常返回后"),i("触发")])])]),l("li",null,[l("p",null,[l("strong",null,"@AfterThrowing")]),l("ul",null,[l("li",null,[i("目标方法"),l("strong",null,"抛出异常后"),i("触发")])])])],-1),l("h3",{id:"高效使用-pointcut",tabindex:"-1"},[i("高效使用@PointCut "),l("a",{class:"header-anchor",href:"#高效使用-pointcut","aria-label":'Permalink to "高效使用@PointCut"'},"​")],-1),l("p",null,"通过抽取公共切入点表达式，提升代码复用性：",-1),l("div",{class:"language-java vp-adaptive-theme"},[l("button",{title:"Copy Code",class:"copy"}),l("span",{class:"lang"},"java"),l("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 定义公共切入点  ")]),i(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"@"),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Pointcut"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"execution(* com.example.service.*.*(..))"'),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")  ")]),i(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"public"),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," void"),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," serviceMethods"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"() {}  ")]),i(`
`),l("span",{class:"line"}),i(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 多个通知复用同一个切入点  ")]),i(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"@"),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Before"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"serviceMethods()"'),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")  ")]),i(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"public"),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," void"),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," logStart"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(JoinPoint jp) {  ")]),i(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    // 记录方法开始  ")]),i(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}  ")]),i(`
`),l("span",{class:"line"}),i(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"@"),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"AfterReturning"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),l("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"serviceMethods()"'),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")  ")]),i(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"public"),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," void"),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," logSuccess"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(JoinPoint jp) {  ")]),i(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    // 记录成功执行  ")]),i(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),l("button",{class:"collapse"})],-1),l("p",null,[l("strong",null,"可见性规则"),i("：")],-1),l("ul",null,[l("li",null,[l("code",null,"private"),i("：仅当前切面类可用")]),l("li",null,[l("code",null,"public"),i("：支持跨切面类复用")])],-1),l("h3",{id:"多切面执行顺序控制",tabindex:"-1"},[i("多切面执行顺序控制 "),l("a",{class:"header-anchor",href:"#多切面执行顺序控制","aria-label":'Permalink to "多切面执行顺序控制"'},"​")],-1),l("h4",{id:"默认行为",tabindex:"-1"},[i("默认行为 "),l("a",{class:"header-anchor",href:"#默认行为","aria-label":'Permalink to "默认行为"'},"​")],-1),l("p",null,"按切面类名排序：",-1),l("ul",null,[l("li",null,[i("前置通知：字母序靠前的先执行（如"),l("code",null,"AService"),i("早于"),l("code",null,"BService"),i("）")]),l("li",null,[i("后置通知：字母序靠前的"),l("strong",null,"后"),i("执行（类似栈结构）")])],-1),l("h4",{id:"自定义顺序",tabindex:"-1"},[i("自定义顺序 "),l("a",{class:"header-anchor",href:"#自定义顺序","aria-label":'Permalink to "自定义顺序"'},"​")],-1),l("p",null,[i("使用"),l("code",null,"@Order(数字)"),i("注解：")],-1),l("ul",null,[l("li",null,"数字越小优先级越高"),l("li",null,[i("前置通知：数值小的"),l("strong",null,"先"),i("执行")]),l("li",null,[i("后置通知：数值小的"),l("strong",null,"先"),i("执行")])],-1),l("div",{class:"language-java vp-adaptive-theme"},[l("button",{title:"Copy Code",class:"copy"}),l("span",{class:"lang"},"java"),l("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"@"),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Aspect"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  ")]),i(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"@"),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Order"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// 最高优先级  ")]),i(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"public"),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," class"),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," LogAspect"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {  ")]),i(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    // ...  ")]),i(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),l("button",{class:"collapse"})],-1),l("h3",{id:"总结与最佳实践",tabindex:"-1"},[i("总结与最佳实践 "),l("a",{class:"header-anchor",href:"#总结与最佳实践","aria-label":'Permalink to "总结与最佳实践"'},"​")],-1),l("ol",null,[l("li",null,[l("p",null,[l("strong",null,"选择通知类型"),i("：")]),l("ul",null,[l("li",null,[i("需要控制方法执行 → "),l("code",null,"@Around")]),l("li",null,"简单前置/后置处理 → 其他四类")])]),l("li",null,[l("p",null,[l("strong",null,"优先使用公共切入点"),i("：")]),l("ul",null,[l("li",null,[i("通过"),l("code",null,"@PointCut"),i("提升代码可维护性")])])]),l("li",null,[l("p",null,[l("strong",null,"明确切面顺序"),i("：")]),l("ul",null,[l("li",null,[i("默认按类名排序，重要切面使用"),l("code",null,"@Order"),i("显式声明")])])])],-1),l("p",null,[i("通过合理运用AOP,开发者能构建出"),l("strong",null,"高内聚，低耦合"),i("的优雅系统架构。建议从简单的日志、耗时系统入手，逐步探索事务管理、权限控制等高级用法。")],-1)])),"main-header":s(()=>[n(a.$slots,"main-header")]),"main-header-after":s(()=>[n(a.$slots,"main-header-after")]),"main-nav":s(()=>[n(a.$slots,"main-nav")]),"main-content-before":s(()=>[n(a.$slots,"main-content-before")]),"main-content":s(()=>[n(a.$slots,"main-content")]),"main-content-after":s(()=>[n(a.$slots,"main-content-after")]),"main-nav-before":s(()=>[n(a.$slots,"main-nav-before")]),"main-nav-after":s(()=>[n(a.$slots,"main-nav-after")]),comment:s(()=>[n(a.$slots,"comment")]),footer:s(()=>[n(a.$slots,"footer")]),aside:s(()=>[n(a.$slots,"aside")]),"aside-custom":s(()=>[n(a.$slots,"aside-custom")]),default:s(()=>[n(a.$slots,"default")]),_:3},8,["frontmatter"])}}};export{N as default,v as usePageData};
